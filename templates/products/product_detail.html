{% extends 'base.html' %}

{% block title %}{{ product.name }} - Nexara{% endblock %}

{% block content %}
<div class="container section" style="margin-top: 20px; display: flex; gap: 40px; background: white;">
    <div style="flex: 1; text-align: center;">
        <img src="{{ product.get_image }}" alt="{{ product.name }}" style="max-width: 100%; max-height: 450px; object-fit: contain;">
        
        <div style="display: flex; gap: 20px; margin-top: 20px;">
            <a href="{% url 'cart_add' product.id %}" class="btn-primary" style="flex: 1; background: #ff9f00; display: flex; align-items: center; justify-content: center; text-decoration: none; border-radius: 2px;"><i class="fas fa-shopping-cart"></i> ADD TO CART</a>
            <a href="{% url 'buy_now' product.id %}" class="btn-primary" style="flex: 1; background: #fb641b; display: flex; align-items: center; justify-content: center; text-decoration: none; border-radius: 2px;"><i class="fas fa-bolt"></i> BUY NOW</a>
        </div>
    </div>
    
    <div style="flex: 1.5;">
        <nav style="font-size: 12px; color: #878787; margin-bottom: 10px;">
            <a href="{% url 'home' %}">Home</a> > <a href="{% url 'product_list_by_category' product.category.slug %}">{{ product.category.name }}</a> > {{ product.name }}
        </nav>
        <h1 style="font-size: 24px; font-weight: 500;">{{ product.name }}</h1>
        <div style="margin-top: 15px;">
            <span style="font-size: 28px; font-weight: 700;">₹{{ product.price }}</span>
            <span style="color: #388e3c; font-weight: 600; margin-left: 15px;">Special Price</span>
        </div>
        
        <div style="margin-top: 20px;">
            <h3>Available offers</h3>
            <ul style="list-style: none; margin-top: 10px; font-size: 14px;">
                <li style="margin-bottom: 8px;"><i class="fas fa-tag" style="color: #388e3c;"></i> Bank Offer 5% Cashback on Nexara Axis Bank Card</li>
                <li style="margin-bottom: 8px;"><i class="fas fa-tag" style="color: #388e3c;"></i> Special Price Get extra 10% off</li>
            </ul>
        </div>
        
        <div style="margin-top: 30px;">
            <h3 style="border-bottom: 1px solid #f0f0f0; padding-bottom: 10px;">Product Description</h3>
            <p style="margin-top: 15px; line-height: 1.6;">{{ product.description }}</p>
        </div>
        
        <div style="margin-top: 30px;">
            <p><strong>Stock:</strong> {% if product.stock > 0 %}{{ product.stock }} items available{% else %}<span style="color: red;">Out of stock</span>{% endif %}</p>
        </div>

        <form action="{% url 'wishlist_toggle' product.id %}" method="post" style="margin-top: 20px;">
            {% csrf_token %}
            <button type="submit" style="background: none; border: 1px solid #e0e0e0; padding: 10px 20px; border-radius: 2px; cursor: pointer; font-weight: 600; display: flex; align-items: center; gap: 8px;">
                <i class="fas fa-heart" style="color: #ff4343;"></i> ADD TO WISHLIST
            </button>
        </form>
    </div>
</div>

<div class="container section" style="margin-top: 30px;">
    <h3>Related Products</h3>
    <div class="product-grid" style="margin-top: 20px;">
        {% for p in related_products %}
            <a href="{% url 'product_detail' p.slug %}" class="product-card">
                <img src="{{ p.get_image }}" alt="{{ p.name }}" class="product-image">
                <div class="product-info">
                    <p class="product-name">{{ p.name }}</p>
                    <p class="product-price">₹{{ p.price }}</p>
                </div>
            </a>
        {% endfor %}
    </div>
</div>
{% endblock %}
